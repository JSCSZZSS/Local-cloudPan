import{an as F,c3 as R,a5 as T,a4 as M,o as t,c as d,aF as n,aB as c,b as e,aI as _,R as N,c7 as V,ax as w,bA as b,aA as k,b0 as E,aN as $,aO as j,aH as q,aD as z,p as H,a as P,_ as G}from"./index-B5pPcsYu.js";import{c as J,m as K,d as Q,e as U,f as W,h as X,a as Y,b as Z,_ as ee}from"./index-DU-i08af.js";const S=l=>(H("data-v-9ff32669"),l=l(),P(),l),se={class:"card-header"},ae={class:"card-header-text"},oe={class:"breadcrumb-wrapper"},te={class:"table-wrapper"},ce={key:0,class:"dic-table"},ne=S(()=>e("colgroup",null,[e("col",{width:"100%"})],-1)),le=["onClick"],re=S(()=>e("img",{src:ee,alt:"",width:"25px",height:"25px",class:"file-pic"},null,-1)),ie={class:"filename"},de={class:"card-footer"},pe=F({name:"MoveSelect",__name:"index",props:{mvOrCopyShow:{type:Boolean},filenameList:{},popoverType:{},onSuccess:{type:Function}},emits:["update:mvOrCopyShow"],setup(l,{emit:g}){const m=l,x=g,B=R(),o=T(["全部文件"]),h=M([]),f=async s=>{const a=[...o.value.slice(1),s].join("/"),u=await J(a);if(u.code===200){const v=u.data.fileList.filter(r=>r.isDir).map(r=>r.name);h.value=v}s&&o.value.push(s)};f("");const I=s=>{const a=o.value.indexOf(s);a>-1&&(o.value=o.value.slice(0,a+1)),f("")},O=async()=>{const s=o.value.slice(1).join("/");try{const a=await K(B.query.path,m.filenameList,s,m.popoverType);a.code===200&&Q({type:"success",message:a.msg})}catch{}finally{p(),m.onSuccess()}},p=()=>x("update:mvOrCopyShow",!1);return(s,a)=>{const u=z,v=U,r=W,L=X,C=Y,A=Z;return t(),d(w,null,[n(A,{shadow:"always",class:"move-card"},{header:c(()=>[e("div",se,[e("span",ae,_(s.popoverType==="move"?"移动到":"复制到"),1),n(u,{size:15,class:"close-btn",onClick:p},{default:c(()=>[n(N(V))]),_:1})])]),default:c(()=>[e("div",oe,[n(r,{"separator-icon":"ArrowRight"},{default:c(()=>[(t(!0),d(w,null,b(o.value,(i,y)=>(t(),k(v,{key:y,onClick:D=>I(i)},{default:c(()=>[e("span",null,_(i),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),e("div",te,[h.value.length>1?(t(),d("table",ce,[ne,e("tbody",null,[(t(!0),d(w,null,b(h.value,(i,y)=>(t(),d("tr",{key:y,class:"dic-table-row",onClick:D=>f(i)},[e("td",null,[re,e("span",ie,_(i),1)])],8,le))),128))])])):(t(),k(L,{key:1,description:`移动到 ${o.value.at(-1)} 文件夹`},null,8,["description"]))]),e("div",de,[n(C,{plain:"",onClick:p},{default:c(()=>[E("取消")]),_:1}),n(C,{type:"primary",onClick:O},{default:c(()=>[E(_(s.popoverType==="move"?"移动到此":"复制到此"),1)]),_:1})])]),_:1}),$(e("div",{class:"panel-cover",onClick:q(p,["self"])},null,512),[[j,s.mvOrCopyShow]])],64)}}}),me=G(pe,[["__scopeId","data-v-9ff32669"]]);export{me as default};
